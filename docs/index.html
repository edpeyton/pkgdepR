<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Statically Determine Function Dependencies Between Packages • pkgdepR</title>
<script src="deps/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Statically Determine Function Dependencies Between Packages">
<meta name="description" content="Statically determine and visualize the function dependencies within and across packages. This may be useful for managing function dependencies across a code base of multiple R packages.">
<meta property="og:description" content="Statically determine and visualize the function dependencies within and across packages. This may be useful for managing function dependencies across a code base of multiple R packages.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">pkgdepR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/pkgdepR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/edpeyton/pkgdepR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="pkgdepr">pkgdepR<a class="anchor" aria-label="anchor" href="#pkgdepr"></a>
</h1></div>
<p><a href="https://cran.r-project.org/package=pkgdepR" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/pkgdepR"></a> <a href="https://cran.r-project.org/package=pkgdepR" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/pkgdepR"></a> <a href="https://github.com/edpeyton/pkgdepR/actions/" class="external-link"><img src="https://github.com/edpeyton/pkgdepR/workflows/R-CMD-check/badge.svg" alt="R build status"></a> <a href="https://CRAN.R-project.org/package=pkgdepR" class="external-link"><img src="https://www.r-pkg.org/badges/version/pkgdepR" alt="CRAN status"></a> <a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></p>
</div>
<div class="section level1">
<h1 id="introduction-">Introduction <img src="inst/figures/hexsticker.png" align="right" style="width:25%"><a class="anchor" aria-label="anchor" href="#introduction-"></a>
</h1>
<p>Have you ever wanted to visualize dependencies between functions for a group of R packages you have developed?</p>
<p>Then try using <a href="https://pkgdepR.org/" class="external-link">pkgdepR</a>!</p>
<p><a href="https://pkgdepR.org/" class="external-link">pkgdepR</a> takes any number of (correctly compiled) R packages and finds the links between all of the function in those namespaces.</p>
<div class="section level2">
<h2 id="about">About<a class="anchor" aria-label="anchor" href="#about"></a>
</h2>
<div class="section level3">
<h3 id="why-create-pkgdepr">Why create <code>{pkgdepR}</code>?<a class="anchor" aria-label="anchor" href="#why-create-pkgdepr"></a>
</h3>
<p><a href="https://pkgdepR.org/" class="external-link">pkgdepR</a> was created to solve a particular problem I had faced when developing interrelated R packages within organizations. Oftentimes, I would want to see (visually) how all the functions in one package interacted with all the functions in another package.</p>
<p>This was particularly useful in managing the function dependencies across a large code base of R packages.</p>
</div>
<div class="section level3">
<h3 id="how-does-pkgdepr-work">How does <code>{pkgdepR}</code> work?<a class="anchor" aria-label="anchor" href="#how-does-pkgdepr-work"></a>
</h3>
<p><a href="https://pkgdepR.org/" class="external-link">pkgdepR</a> simply takes as an argument a vector of package names (that should already be on the search path) and explores how each of the functions in each of the namespaces interact. It does this in two stages:</p>
<ul>
<li>Getting all intra-package function dependencies for each package; <em>and</em><br>
</li>
<li>Getting all inter-package function dependencies for each combination of packages.</li>
</ul>
<p>Each defined name in a particular package’s namespace that is also a function is then decomposed. From this decomposition, if any function is found to be called within its contents, then a link is created. To properly identify distinct name calls, a search is done for a package tag preceding the name (i.e. <code>::</code>). If no tag exists, then a search for an imported function is conducted. On the other hand, if the function name is already declared in the primary namespace, then it is obviously that function being called.</p>
<p>If a function is ambiguously called (without a package tag or not being explicitly imported from another namespace) then it is deliberately ignored in the linkage. This is because the linkage would be environment-dependent and would change depending on the contents of the search path in that particular session.</p>
</div>
<div class="section level3">
<h3 id="s3-methods-for-pkgdepr-objects">S3 methods for <code>{pkgdepR}</code> objects<a class="anchor" aria-label="anchor" href="#s3-methods-for-pkgdepr-objects"></a>
</h3>
<p>The main wrapper function for <a href="https://pkgdepR.org/" class="external-link">pkgdepR</a> is <code>pkgdepR::deps(...)</code> which returns an object of class <code>pkgdepR</code>. An S3 method has been created for objects of class <code>pkgdepR</code> so they can be easily plotted. See <code><a href="reference/plot.pkgdepR.html">?pkgdepR::plot.pkgdepR</a></code> for further details.</p>
<p><a href="https://pkgdepR.org/" class="external-link">pkgdepR</a> makes use of the fantastic <a href="https://github.com/datastorm-open/visNetwork" class="external-link">visNetwork</a> package for creating an interactive network visualization of the functions present in R packages.</p>
<p>All implemented methods for this class are:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/methods.html" class="external-link">methods</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"pkgdepR"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] plot    print   summary</span></span>
<span><span class="co">#&gt; see '?methods' for accessing help and source code</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="caveats">Caveats<a class="anchor" aria-label="anchor" href="#caveats"></a>
</h2>
<p>The links between functions are determined <strong>statically</strong>, meaning the dependencies are identified without executing any code. As such, any functions that are defined dynamically at run-time will not be picked up. In the example below, <code>foo()</code> will be picked up as it is declared in the package’s namespace. However, <code>bar()</code> will not be picked up as it is only defined at run-time when <code>foo()</code> is called.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># @title foo function</span></span>
<span><span class="co"># @export</span></span>
<span><span class="va">foo</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span> <span class="co"># - this will be picked up!</span></span>
<span></span>
<span>  <span class="va">bar</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span> <span class="co"># - this won't be picked up!</span></span>
<span>  </span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="fu">bar</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Similarly, there can be cases where linkages are created that may not occur at run-time. Let’s add to the previous example, by adding a function <code>bar()</code> declared in the package namespace we are interested in.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># @title bar function</span></span>
<span><span class="co"># @export</span></span>
<span><span class="va">bar</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span> <span class="co"># - this will be picked up!</span></span>
<span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Then, statically, it appears that <code>foo()</code> is calling the <code>bar()</code> from the namespace we are interested in. However, at run-time, we know this is <strong>not</strong> the case, as <code>bar()</code> is clearly defined locally and it is the local function that is called. In this instance, <code>pkgdepR</code> will show a link between <code>package::foo()</code> and <code>package::bar()</code> when no real run-time dependency exists.</p>
<p>These cases will rarely arise in normal package development, but it is important to be aware of the behaviour nonetheless.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the released version of <a href="https://pkgdepR.org/" class="external-link">pkgdepR</a> from <a href="https://CRAN.R-project.org" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pkgdepR"</span><span class="op">)</span></span></code></pre></div>
<p>And the development version from <a href="https://github.com/edpeyton/pkgdepR" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"edpeyton/pkgdepR"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="how-to-use">How to use<a class="anchor" aria-label="anchor" href="#how-to-use"></a>
</h1>
<p>Here we’ll show an example of how to use <a href="https://pkgdepR.org/" class="external-link">pkgdepR</a>.</p>
<p>First, let’s load the required packages.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pkgdepR.org/" class="external-link">pkgdepR</a></span><span class="op">)</span></span></code></pre></div>
<p>The required packages have now been added to the search path.</p>
<div class="section level2">
<h2 id="single-package">Single package<a class="anchor" aria-label="anchor" href="#single-package"></a>
</h2>
<p>Create a <code>pkgdepR</code> object as follows:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v</span> <span class="op">=</span> <span class="fu">pkgdepR</span><span class="fu">::</span><span class="fu"><a href="reference/deps.html">deps</a></span><span class="op">(</span>pkg <span class="op">=</span> <span class="st">"pkgdepR"</span><span class="op">)</span></span></code></pre></div>
<p>We can see a summary of the object</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v</span> <span class="co"># alternatively, summary(v) or print(v)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; pkgdepR object</span></span>
<span><span class="co">#&gt; ------------------------------</span></span>
<span><span class="co">#&gt; Packages:    pkgdepR</span></span>
<span><span class="co">#&gt; Total nodes: 16</span></span>
<span><span class="co">#&gt; Total links: 17</span></span>
<span><span class="co">#&gt;   -Between packages: 0</span></span>
<span><span class="co">#&gt;   -Within packages:  17</span></span>
<span><span class="co">#&gt;     --Between functions: 16</span></span>
<span><span class="co">#&gt;     --Self-referential:  1</span></span></code></pre></div>
<p>To see the network visualization, simply call plot.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dep</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multiple-packages">Multiple packages<a class="anchor" aria-label="anchor" href="#multiple-packages"></a>
</h2>
<p>Visualizing multiple packages works in a similar way.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v</span> <span class="op">=</span> <span class="fu">pkgdepR</span><span class="fu">::</span><span class="fu"><a href="reference/deps.html">deps</a></span><span class="op">(</span>pkg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pkgdepR"</span>, <span class="st">"magrittr"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v</span> <span class="co"># alternatively, summary(v) or print(v)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; pkgdepR object</span></span>
<span><span class="co">#&gt; ------------------------------</span></span>
<span><span class="co">#&gt; Packages:    pkgdepR, magrittr</span></span>
<span><span class="co">#&gt; Total nodes: 64</span></span>
<span><span class="co">#&gt; Total links: 30</span></span>
<span><span class="co">#&gt;   -Between packages: 6</span></span>
<span><span class="co">#&gt;   -Within packages:  24</span></span>
<span><span class="co">#&gt;     --Between functions: 23</span></span>
<span><span class="co">#&gt;     --Self-referential:  1</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="contributors">Contributors<a class="anchor" aria-label="anchor" href="#contributors"></a>
</h2>
<p><a href="https://github.com/edpeyton" class="external-link">Ed Peyton</a></p>
<hr>
<p><a href="#top">Back to top</a></p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=pkgdepR" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/edpeyton/pkgdepR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/edpeyton/pkgdepR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing pkgdepR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Ed Peyton <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1427-0306" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ed Peyton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
